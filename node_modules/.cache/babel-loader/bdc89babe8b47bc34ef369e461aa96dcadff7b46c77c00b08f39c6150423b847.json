{"ast":null,"code":"import React,{useState}from'react';import{useLocation}from'react-router-dom';import axios from'axios';// Import axios for API requests\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function HomePage(){var _location$state,_location$state2;const location=useLocation();const email=((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.email)||'';// Retrieve the email passed from LoginForm\nconst initialProfileImageUrl=((_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.profileImageUrl)||'';// Retrieve the profile image URL if available\nconst[profileImageUrl,setProfileImageUrl]=useState(initialProfileImageUrl);// State to handle profile image\nconst[file,setFile]=useState(null);// State to store the selected file\n// Function to handle file input change\nconst handleFileChange=e=>{const selectedFile=e.target.files[0];if(selectedFile){setFile(selectedFile);// Store the selected file\nconst reader=new FileReader();reader.onload=()=>{setProfileImageUrl(reader.result);// Update profile image to the uploaded file\n};reader.readAsDataURL(selectedFile);// Convert file to a Base64 string\n}};// Function to trigger file input when image is clicked\nconst handleImageClick=()=>{document.getElementById('fileInput').click();// Programmatically click the hidden input\n};// Function to send email and profile image to the API\nconst handleSubmit=async()=>{if(!file){alert('Please upload an image.');return;}try{const reader=new FileReader();reader.onload=async()=>{const base64Image=reader.result.split(',')[1];// Extract Base64 string\n// Send email and profileImage to API\nconsole.log(\"Post request is being called...\");const response=await axios.post('https://8dz7x9sos4.execute-api.us-east-1.amazonaws.com/dev/actions',{email:email,profileImage:base64Image// Base64 string of the uploaded image\n});// console.log('Profile Image (base64): ' + base64Image);\nconsole.log('Upload Success:',response.data);};reader.readAsDataURL(file);// Convert file to a Base64 string\n}catch(error){console.error('Upload Error:',error);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome to the Home Page\"}),profileImageUrl?/*#__PURE__*/_jsx(\"img\",{src:profileImageUrl,alt:\"Profile\",style:{width:'150px',height:'auto',cursor:'pointer'},onClick:handleImageClick// Trigger file upload when image is clicked\n}):/*#__PURE__*/_jsx(\"p\",{children:\"No profile image available.\"}),/*#__PURE__*/_jsx(\"input\",{id:\"fileInput\",type:\"file\",accept:\"image/*\",style:{display:'none'}// Hide the input field\n,onChange:handleFileChange// Handle the file selection\n}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Submit\"}),\" \"]});}export default HomePage;","map":{"version":3,"names":["React","useState","useLocation","axios","jsx","_jsx","jsxs","_jsxs","HomePage","_location$state","_location$state2","location","email","state","initialProfileImageUrl","profileImageUrl","setProfileImageUrl","file","setFile","handleFileChange","e","selectedFile","target","files","reader","FileReader","onload","result","readAsDataURL","handleImageClick","document","getElementById","click","handleSubmit","alert","base64Image","split","console","log","response","post","profileImage","data","error","children","src","alt","style","width","height","cursor","onClick","id","type","accept","display","onChange"],"sources":["/Users/mayssaelloumi/Documents/cloud_project/auth-app/src/HomePage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport axios from 'axios';  // Import axios for API requests\n\nfunction HomePage() {\n    const location = useLocation();\n    const email = location.state?.email || '';  // Retrieve the email passed from LoginForm\n    const initialProfileImageUrl = location.state?.profileImageUrl || '';  // Retrieve the profile image URL if available\n    const [profileImageUrl, setProfileImageUrl] = useState(initialProfileImageUrl);  // State to handle profile image\n    const [file, setFile] = useState(null);  // State to store the selected file\n\n    // Function to handle file input change\n    const handleFileChange = (e) => {\n        const selectedFile = e.target.files[0];\n        if (selectedFile) {\n            setFile(selectedFile);  // Store the selected file\n            const reader = new FileReader();\n            reader.onload = () => {\n                setProfileImageUrl(reader.result);  // Update profile image to the uploaded file\n            };\n            reader.readAsDataURL(selectedFile);  // Convert file to a Base64 string\n        }\n    };\n\n    // Function to trigger file input when image is clicked\n    const handleImageClick = () => {\n        document.getElementById('fileInput').click();  // Programmatically click the hidden input\n    };\n\n    // Function to send email and profile image to the API\n    const handleSubmit = async () => {\n        if (!file) {\n            alert('Please upload an image.');\n            return;\n        }\n        try {\n            const reader = new FileReader();\n            reader.onload = async () => {\n                const base64Image = reader.result.split(',')[1];  // Extract Base64 string\n                // Send email and profileImage to API\n                console.log(\"Post request is being called...\")\n                const response = await axios.post('https://8dz7x9sos4.execute-api.us-east-1.amazonaws.com/dev/actions', {\n                    email: email,\n                    profileImage: base64Image,  // Base64 string of the uploaded image\n                });\n                // console.log('Profile Image (base64): ' + base64Image);\n                console.log('Upload Success:', response.data);\n            };\n            reader.readAsDataURL(file);  // Convert file to a Base64 string\n        } catch (error) {\n            console.error('Upload Error:', error);\n        }\n    };\n\n    return (\n        <div>\n            <h2>Welcome to the Home Page</h2>\n            {profileImageUrl ? (\n                <img\n                    src={profileImageUrl}\n                    alt=\"Profile\"\n                    style={{ width: '150px', height: 'auto', cursor: 'pointer' }}\n                    onClick={handleImageClick}  // Trigger file upload when image is clicked\n                />\n            ) : (\n                <p>No profile image available.</p>\n            )}\n\n            {/* Hidden file input */}\n            <input\n                id=\"fileInput\"\n                type=\"file\"\n                accept=\"image/*\"\n                style={{ display: 'none' }}  // Hide the input field\n                onChange={handleFileChange}  // Handle the file selection\n            />\n\n            <button onClick={handleSubmit}>Submit</button> {/* Submit the image to API */}\n        </div>\n    );\n}\n\nexport default HomePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}